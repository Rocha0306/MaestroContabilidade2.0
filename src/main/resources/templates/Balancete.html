<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Livro Balancete</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<table class="table table-bordered border-primary">
    <thead>
    <tr>
        <th scope="col">Elementos</th>
        <th scope="col">Credito</th>
        <th scope="col">Debito</th>
        <th scope="col"> Saldo Final </th>
    </tr>
    </thead>
    <tr th:each="Balancete : ${BalanceteDados}">
        <th th:text="${Balancete.getElementoFato()}"> </th>
        <td th:text="${Balancete.getValorCredito()}"></td>
        <td th:text="${Balancete.getValorDebito()}"></td>
        <td th:text="${Balancete.getSaldoFinal()}"> </td>



    </tr>






</table>

<a th:text="${Saldo}"> </a>

<a class="btn btn-primary" type="submit" href="/BalanceteSaldo">Imprimir Razonete</a>
<a class="btn btn-primary" type="submit" href="/Permitir"  th:data-nivel="${NivelDeAcesso}">Recusar Pedido</a>
<script>
    // Função para definir a visibilidade dos links com base no nível de acesso do usuário
    function definirVisibilidadeLinks() {
        var links = document.querySelectorAll(".btn-primary");
        console.log(links); // Verifica se os botões estão sendo selecionados corretamente

        links.forEach(function(link) {
            var href = link.getAttribute('href');
            var nivelUsuario = link.getAttribute('data-nivel');
            console.log("Href:", href, "Nível do usuário:", nivelUsuario); // Verifica os valores de href e nivelUsuario

                if (nivelUsuario === "N3" || nivelUsuario === "adm" || nivelUsuario == "N2") {
                // Mostrar o botão Permitir para usuários N3 e admin e ocultar o botão Conferir
                if (href === '/Permitir') {
                    link.style.display = 'block';
                } else if (href === '/Conferir') {
                    link.style.display = 'none';
                }
            }
        });
    }

    // Chame a função para definir a visibilidade dos links quando a página carregar
    document.addEventListener('DOMContentLoaded', function() {
        definirVisibilidadeLinks();
    });
</script>
</body>
</html>