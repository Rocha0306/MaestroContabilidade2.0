<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<head>
    <meta charset="UTF-8">
    <title>Diario</title>
    <link rel="stylesheet" href="/Diario.css">
</head>

<body>
<h1 class="cabecalho" onclick="definirVisibilidadeLinks()">DIARIO</h1>



<table class="table">
    <thead>
    <tr>
        <th scope="col">Codigo do Evento</th>
        <th scope="col">Data </th>
        <th scope="col">Detalhes </th>
        <th scope="col">Debito</th>
        <th scope="col">Credito</th>
        <th scope="col">Valor</th>
    </tr>
    </thead>
    <tbody class="table-group-divider">

    <tr th:each="Diario: ${LivroDiario}"> <!-- PARA CADA FATO EM FATOS -->
        <td th:text="${Diario.getCodFato()}"> </td>
        <td th:text="${Diario.getData()}"> </td>
        <td th:text="${Diario.getDetalhes()}"> </td>
        <td th:text="${Diario.getDebito()}"> </td>
        <td th:text="${Diario.getCredito()}"> </td>
        <td th:text="${Diario.getValor()}"> </td>

    </tr>



    </tbody>
</table>






<a class="btn btn-primary" type="submit" href="/Permitir"  th:data-nivel="${NivelDeAcesso}">Recusar Pedido</a>





<a class="btn btn-primary" id="Nivel" type="submit" href="/DadosDiario">Imprimir Diario</a>
<script>
    // Função para definir a visibilidade dos links com base no nível de acesso do usuário
    function definirVisibilidadeLinks() {
        var links = document.querySelectorAll(".btn-primary");
        console.log(links); // Verifica se os botões estão sendo selecionados corretamente

        links.forEach(function(link) {
            var href = link.getAttribute('href');
            var nivelUsuario = link.getAttribute('data-nivel');
            console.log("Href:", href, "Nível do usuário:", nivelUsuario); // Verifica os valores de href e nivelUsuario

            if (nivelUsuario === "N2") {
                // Ocultar o botão Permitir para usuários N2 e mostrar o botão Conferir
                if (href === '/Permitir') {
                    link.style.display = 'none';
                } else if (href === '/Conferir') {
                    link.style.display = 'block';
                }
            } else if (nivelUsuario === "N3" || nivelUsuario === "adm") {
                // Mostrar o botão Permitir para usuários N3 e admin e ocultar o botão Conferir
                if (href === '/Permitir') {
                    link.style.display = 'block';
                } else if (href === '/Conferir') {
                    link.style.display = 'none';
                }
            }
        });
    }

    // Chame a função para definir a visibilidade dos links quando a página carregar
    document.addEventListener('DOMContentLoaded', function() {
        definirVisibilidadeLinks();
    });
</script>



</body>



</html>
